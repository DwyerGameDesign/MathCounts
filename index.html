<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MATHCOUNTS Â· Counting & Probability Â· State Prep</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=JetBrains+Mono:wght@400;600&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="everything">

<header>
  <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle light/dark mode">
    <span class="theme-icon">ğŸŒ™</span>
  </button>
  <div class="badge">State Level Â· Counting &amp; Probability Â· Number Theory</div>
  <h1>MATHCOUNTS<br><span>Cheat Sheet</span></h1>
  <p class="subtitle">Permutations &amp; Combinations Â· Probability Â· Complementary Counting Â· Number Theory</p>
  <div class="divider"></div>
</header>

<nav class="tab-bar">
  <div class="tab active" onclick="showTab('perm')">P &amp; C</div>
  <div class="tab" onclick="showTab('prob')">Probability</div>
  <div class="tab" onclick="showTab('comp')">Complementary</div>
  <div class="tab" onclick="showTab('number')">Number Theory</div>
  <div class="tab" onclick="showTab('ref')">Quick Ref</div>
</nav>

<main class="content">

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       TAB 1 Â· PERMUTATIONS & COMBINATIONS
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section class="panel active" id="tab-perm">

    <div class="section-block">
      <div class="section-label">Core Formulas</div>
      <div class="formula-grid">
        <div class="formula-card" onclick="toggleFormulaExample(this)">
          <div class="label">Permutation â€” Order Matters</div>
          <div class="formula">P(n,r) = n! / (nâˆ’r)!</div>
          <div class="desc">Arrange <em>r</em> items from <em>n</em> distinct items. Think: <em>passwords, race placements, seating in a row.</em></div>
          <div class="formula-example">
            <div class="example-label">Example</div>
            <div class="example-problem"><strong>Problem:</strong> How many ways can 5 runners finish in 1st, 2nd, and 3rd place?</div>
            <div class="example-solution">
              <div class="formula-display">
                <div class="formula-general">P(n,r) = n! / (nâˆ’r)!</div>
                <div class="formula-arrow">â†“</div>
                <div class="formula-substituted">P(5,3) = 5! / (5âˆ’3)!</div>
              </div>
              <div class="formula-substitution">
                <strong>Calculate:</strong> = 5! / 2! = 120 / 2 = <strong>60 ways</strong>
              </div>
            </div>
          </div>
        </div>
        <div class="formula-card blue" onclick="toggleFormulaExample(this)">
          <div class="label">Combination â€” Order Doesn't Matter</div>
          <div class="formula">C(n,r) = n! / (r!(nâˆ’r)!)</div>
          <div class="desc">Choose <em>r</em> items from <em>n</em>. Think: <em>committees, hands of cards, pizza toppings.</em></div>
          <div class="formula-example">
            <div class="example-label">Example</div>
            <div class="example-problem"><strong>Problem:</strong> A committee of 3 is chosen from 10 people. How many committees are possible?</div>
            <div class="example-solution">
              <div class="formula-display">
                <div class="formula-general">C(n,r) = n! / (r!(nâˆ’r)!)</div>
                <div class="formula-arrow">â†“</div>
                <div class="formula-substituted">C(10,3) = 10! / (3!(10âˆ’3)!)</div>
                <div class="formula-substituted">= 10! / (3!Â·7!)</div>
              </div>
              <div class="formula-substitution">
                <strong>Calculate:</strong> = 3,628,800 / (6Â·5,040) = 3,628,800 / 30,240 = <strong>120 committees</strong>
              </div>
            </div>
          </div>
        </div>
        <div class="formula-card teal" onclick="toggleFormulaExample(this)">
          <div class="label">Permutations with Repetition</div>
          <div class="formula">n! / (a! Â· b! Â· c! â€¦)</div>
          <div class="desc">Arrange items where some are identical. <em>Ex: letters in "BANANA" = 6!/(3!Â·2!Â·1!)</em></div>
          <div class="formula-example">
            <div class="example-label">Example</div>
            <div class="example-problem"><strong>Problem:</strong> How many ways can you arrange the letters in "MAMA"?</div>
            <div class="example-solution">
              <div class="formula-display">
                <div class="formula-general">n! / (a! Â· b! Â· c! â€¦)</div>
                <div class="formula-arrow">â†“</div>
                <div class="formula-substituted">4! / (2! Â· 2!)</div>
                <div class="formula-note">M appears 2 times, A appears 2 times</div>
              </div>
              <div class="formula-substitution">
                <strong>Calculate:</strong> = 24 / (2 Â· 2) = 24 / 4 = <strong>6 arrangements</strong>
              </div>
            </div>
          </div>
        </div>
        <div class="formula-card red" onclick="toggleFormulaExample(this)">
          <div class="label">Circular Permutations</div>
          <div class="formula">(nâˆ’1)!</div>
          <div class="desc">Arranging n items around a circle. One item is "fixed" to remove rotational duplicates. Necklaces = (nâˆ’1)!/2.</div>
          <div class="formula-example">
            <div class="example-label">Example</div>
            <div class="example-problem"><strong>Problem:</strong> How many ways can 6 people sit around a round table?</div>
            <div class="example-solution">
              <div class="formula-display">
                <div class="formula-general">(nâˆ’1)!</div>
                <div class="formula-arrow">â†“</div>
                <div class="formula-substituted">(6âˆ’1)! = 5!</div>
              </div>
              <div class="formula-substitution">
                <strong>Calculate:</strong> = 5! = 120 = <strong>120 arrangements</strong>
              </div>
              <div class="formula-substitution" style="margin-top: 8px; padding-top: 8px; border-top: 1px solid var(--border);">
                <em>For a necklace (flipable):</em> (6âˆ’1)!/2 = 120/2 = <strong>60 arrangements</strong>
              </div>
            </div>
          </div>
        </div>
        <div class="formula-card blue" onclick="toggleFormulaExample(this)">
          <div class="label">Stars &amp; Bars (Distributions)</div>
          <div class="formula">C(n+kâˆ’1, kâˆ’1)</div>
          <div class="desc">Distribute <em>n</em> identical items into <em>k</em> distinct bins (zeros allowed). <em>Ex: cookies into jars.</em></div>
          <div class="formula-example">
            <div class="example-label">Example</div>
            <div class="example-problem"><strong>Problem:</strong> Distribute 10 identical cookies among 4 children (some may get 0).</div>
            <div class="example-solution">
              <div class="formula-display">
                <div class="formula-general">C(n+kâˆ’1, kâˆ’1)</div>
                <div class="formula-arrow">â†“</div>
                <div class="formula-substituted">C(10+4âˆ’1, 4âˆ’1) = C(13, 3)</div>
                <div class="formula-note">n = 10 cookies, k = 4 children</div>
              </div>
              <div class="formula-substitution">
                <strong>Calculate:</strong> = 13! / (3!Â·10!) = <strong>286 ways</strong>
              </div>
              <div class="formula-substitution" style="margin-top: 8px; padding-top: 8px; border-top: 1px solid var(--border);">
                <em>If each must get â‰¥1:</em> Give each 1 cookie first, then distribute remaining 6:<br>C(6+4âˆ’1, 4âˆ’1) = C(9, 3) = <strong>84 ways</strong>
              </div>
            </div>
          </div>
        </div>
        <div class="formula-card" onclick="toggleFormulaExample(this)">
          <div class="label">Derangements (Nothing in Place)</div>
          <div class="formula">D(n) = n!Â·Î£(âˆ’1)áµ/k!</div>
          <div class="desc">Permutations where <strong>no item</strong> appears in its original position. D(n) â‰ˆ n!/e. D(1)=0, D(2)=1, D(3)=2, D(4)=9.</div>
          <div class="formula-example">
            <div class="example-label">Example</div>
            <div class="example-problem"><strong>Problem:</strong> In how many ways can 4 people each get the wrong hat?</div>
            <div class="example-solution">
              <div class="formula-display">
                <div class="formula-general">D(n) = n! âˆ’ (arrangements with â‰¥1 fixed)</div>
                <div class="formula-arrow">â†“</div>
                <div class="formula-substituted">D(4) = 4! âˆ’ C(4,1)Â·3! + C(4,2)Â·2! âˆ’ C(4,3)Â·1! + C(4,4)Â·0!</div>
                <div class="formula-note">Using PIE: Total âˆ’ (at least 1 correct)</div>
              </div>
              <div class="formula-substitution">
                <strong>Calculate:</strong> = 24 âˆ’ 4Â·6 + 6Â·2 âˆ’ 4Â·1 + 1Â·1 = 24 âˆ’ 24 + 12 âˆ’ 4 + 1 = <strong>9 ways</strong>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="section-block">
      <div class="section-label">How to Approach Problems</div>
      <div class="approach">
        <h3>The Decision Framework</h3>
        <div class="step">
          <div class="step-num">1</div>
          <div class="step-text"><strong>Does order matter?</strong> If swapping two items gives a different outcome â†’ Permutation. If not â†’ Combination. Ask: "Is ABC the same as BAC?"</div>
        </div>
        <div class="step">
          <div class="step-num">2</div>
          <div class="step-text"><strong>Are items identical or distinct?</strong> If some items repeat (letters, balls of same color), use multinomial. If all distinct, standard P/C.</div>
        </div>
        <div class="step">
          <div class="step-num">3</div>
          <div class="step-text"><strong>Are there restrictions?</strong> Handle restrictions first â€” fix constrained items, then count the rest freely.</div>
        </div>
        <div class="step">
          <div class="step-num">4</div>
          <div class="step-text"><strong>Is it a distribution problem?</strong> Identical items into bins â†’ Stars &amp; Bars. Distinct items into bins â†’ exponential counting (kâ¿).</div>
        </div>
        <div class="step">
          <div class="step-num">5</div>
          <div class="step-text"><strong>Check if complementary counting is easier:</strong> If the restriction is "at least one" or "not all," often it's faster to count the opposite.</div>
        </div>
      </div>
    </div>

    <div class="section-block">
      <div class="section-label">Gotchas â€” Click to Expand</div>
      <div class="gotcha-grid">
        <div class="gotcha-card" onclick="toggleGotcha(this)">
          <div class="gotcha-header">
            <span class="gotcha-icon">âš ï¸</span>
            <span class="gotcha-title">Circular vs. Linear Seating</span>
            <span class="gotcha-toggle">+</span>
          </div>
          <div class="gotcha-body">In a <strong>line</strong>: n! arrangements. In a <strong>circle</strong>: (nâˆ’1)! arrangements because rotations are the same. <strong>Necklaces</strong> also remove reflections: (nâˆ’1)!/2. Don't forget which one the problem is asking!</div>
        </div>
        <div class="gotcha-card" onclick="toggleGotcha(this)">
          <div class="gotcha-header">
            <span class="gotcha-icon">âš ï¸</span>
            <span class="gotcha-title">"At Least" Restrictions</span>
            <span class="gotcha-toggle">+</span>
          </div>
          <div class="gotcha-body">Problems saying "at least one woman" are almost always easier with complementary: <strong>Total âˆ’ (none of the restricted type)</strong>. Don't do painful casework when you don't have to.</div>
        </div>
        <div class="gotcha-card" onclick="toggleGotcha(this)">
          <div class="gotcha-header">
            <span class="gotcha-icon">âš ï¸</span>
            <span class="gotcha-title">Treating Identical Items as Distinct</span>
            <span class="gotcha-toggle">+</span>
          </div>
          <div class="gotcha-body">If two red balls are considered identical, you <strong>must divide</strong> by the factorial of duplicates. Forgetting this is the #1 overcounting mistake. Always ask: "Are these items actually distinguishable?"</div>
        </div>
        <div class="gotcha-card" onclick="toggleGotcha(this)">
          <div class="gotcha-header">
            <span class="gotcha-icon">âš ï¸</span>
            <span class="gotcha-title">People "Together" Trick</span>
            <span class="gotcha-toggle">+</span>
          </div>
          <div class="gotcha-body">When a group must stay together, <strong>glue them</strong> into one "super-item." Count arrangements of (remaining + 1 super-item), then multiply by arrangements within the group. Don't forget the internal arrangements!</div>
        </div>
        <div class="gotcha-card" onclick="toggleGotcha(this)">
          <div class="gotcha-header">
            <span class="gotcha-icon">âš ï¸</span>
            <span class="gotcha-title">Stars &amp; Bars Pitfalls</span>
            <span class="gotcha-toggle">+</span>
          </div>
          <div class="gotcha-body">Stars &amp; Bars works for <strong>non-negative integers only</strong>. If each bin must have <em>at least 1</em>, subtract 1 from each bin first: give everyone 1, then distribute the remainder freely. New formula: C((nâˆ’k)+(kâˆ’1), kâˆ’1).</div>
        </div>
        <div class="gotcha-card" onclick="toggleGotcha(this)">
          <div class="gotcha-header">
            <span class="gotcha-icon">âš ï¸</span>
            <span class="gotcha-title">Choosing vs. Arranging Sub-Groups</span>
            <span class="gotcha-toggle">+</span>
          </div>
          <div class="gotcha-body">Selecting a committee of 3 from 10 is C(10,3). Selecting and then ranking them (president, VP, secretary) is P(10,3). The difference is the extra 3! factor for internal ordering.</div>
        </div>
      </div>
    </div>

    <div class="section-block">
      <div class="section-label">Practice Problems</div>

      <div class="example-card" onclick="toggleExample(this)">
        <div class="example-question">
          <span class="ex-num">EX 01</span>
          <span class="ex-q">In how many ways can 8 people be seated at a round table if two specific people must NOT sit next to each other?</span>
          <span class="ex-arrow">â–¶</span>
        </div>
        <div class="example-solution">
          <div class="sol-label">Solution</div>
          <div class="sol-text">
            Use complementary counting. <strong>Total circular arrangements</strong> = (8âˆ’1)! = 5040.<br><br>
            <strong>Bad arrangements</strong> (the two sit together): Glue them as a unit â†’ 7 items in a circle = (7âˆ’1)! = 720. The pair can swap internally in 2! = 2 ways. So bad = 720 Ã— 2 = 1440.<br><br>
            <strong>Answer = 5040 âˆ’ 1440 = 3600</strong>
            <span class="ans">3600</span>
          </div>
        </div>
      </div>

      <div class="example-card" onclick="toggleExample(this)">
        <div class="example-question">
          <span class="ex-num">EX 02</span>
          <span class="ex-q">How many ways can the letters of "MISSISSIPPI" be arranged?</span>
          <span class="ex-arrow">â–¶</span>
        </div>
        <div class="example-solution">
          <div class="sol-label">Solution</div>
          <div class="sol-text">
            Count letter frequencies: M=1, I=4, S=4, P=2. Total = 11 letters.<br><br>
            Apply multinomial formula: <strong>11! / (1! Â· 4! Â· 4! Â· 2!)</strong><br><br>
            = 39,916,800 / (1 Â· 24 Â· 24 Â· 2) = 39,916,800 / 1152
            <span class="ans">34,650</span>
          </div>
        </div>
      </div>

      <div class="example-card" onclick="toggleExample(this)">
        <div class="example-question">
          <span class="ex-num">EX 03</span>
          <span class="ex-q">In how many ways can 10 identical candies be distributed among 4 children if each child must receive at least 1?</span>
          <span class="ex-arrow">â–¶</span>
        </div>
        <div class="example-solution">
          <div class="sol-label">Solution</div>
          <div class="sol-text">
            Since each child needs â‰¥1, give each child 1 candy first (uses 4). We now distribute <strong>6 remaining</strong> among 4 children with no restriction.<br><br>
            Stars &amp; Bars: C(6 + 4 âˆ’ 1, 4 âˆ’ 1) = C(9, 3)
            <span class="ans">84</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       TAB 2 Â· PROBABILITY
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section class="panel" id="tab-prob">

    <div class="section-block">
      <div class="section-label">Core Formulas</div>
      <div class="formula-grid">
        <div class="formula-card" onclick="toggleFormulaExample(this)">
          <div class="label">Basic Probability</div>
          <div class="formula">P(A) = favourable / total</div>
          <div class="desc">All outcomes must be equally likely! If they aren't, you can't just count â€” you need weighted probabilities.</div>
          <div class="formula-example">
            <div class="example-label">Example</div>
            <div class="example-problem"><strong>Problem:</strong> What's the probability of rolling an even number on a fair die?</div>
            <div class="example-solution">
              <div class="formula-display">
                <div class="formula-general">P(A) = favourable / total</div>
                <div class="formula-arrow">â†“</div>
                <div class="formula-substituted">P(even) = 3 / 6</div>
                <div class="formula-note">Favourable: {2, 4, 6} = 3 | Total: {1, 2, 3, 4, 5, 6} = 6</div>
              </div>
              <div class="formula-substitution">
                <strong>Calculate:</strong> = <strong>1/2</strong>
              </div>
            </div>
          </div>
        </div>
        <div class="formula-card blue" onclick="toggleFormulaExample(this)">
          <div class="label">Complement Rule</div>
          <div class="formula">P(A) = 1 âˆ’ P(Aá¶œ)</div>
          <div class="desc">The probability something happens = 1 minus the probability it doesn't. Essential for "at least one" problems.</div>
          <div class="formula-example">
            <div class="example-label">Example</div>
            <div class="example-problem"><strong>Problem:</strong> What's the probability of rolling at least one 6 in 3 dice rolls?</div>
            <div class="example-solution">
              <div class="formula-display">
                <div class="formula-general">P(A) = 1 âˆ’ P(Aá¶œ)</div>
                <div class="formula-arrow">â†“</div>
                <div class="formula-substituted">P(at least one 6) = 1 âˆ’ P(no 6s)</div>
              </div>
              <div class="formula-substitution">
                <strong>Calculate P(no 6s):</strong> P(no 6 on one die) = 5/6<br>P(no 6s in 3 rolls) = (5/6)Â³ = 125/216
              </div>
              <div class="formula-substitution">
                <strong>Substitute:</strong> P(at least one) = 1 âˆ’ 125/216
              </div>
              <div class="formula-substitution">
                <strong>Calculate:</strong> = 216/216 âˆ’ 125/216 = <strong>91/216</strong>
              </div>
            </div>
          </div>
        </div>
        <div class="formula-card teal" onclick="toggleFormulaExample(this)">
          <div class="label">Multiplication Rule</div>
          <div class="formula">P(Aâˆ©B) = P(A)Â·P(B|A)</div>
          <div class="desc">For dependent events. If independent: P(Aâˆ©B) = P(A)Â·P(B). "AND" = multiply.</div>
          <div class="formula-example">
            <div class="example-label">Example</div>
            <div class="example-problem"><strong>Problem:</strong> Draw 2 cards without replacement. What's P(both are aces)?</div>
            <div class="example-solution">
              <div class="formula-display">
                <div class="formula-general">P(Aâˆ©B) = P(A)Â·P(B|A)</div>
                <div class="formula-arrow">â†“</div>
                <div class="formula-substituted">P(both aces) = P(1st ace) Â· P(2nd ace | 1st ace)</div>
              </div>
              <div class="formula-substitution">
                <strong>Step 1:</strong> P(1st ace) = 4/52 = 1/13
              </div>
              <div class="formula-substitution">
                <strong>Step 2:</strong> P(2nd ace | 1st was ace) = 3/51 = 1/17
              </div>
              <div class="formula-substitution">
                <strong>Substitute:</strong> P(both aces) = (1/13) Â· (1/17)
              </div>
              <div class="formula-substitution">
                <strong>Calculate:</strong> = <strong>1/221</strong>
              </div>
            </div>
          </div>
        </div>
        <div class="formula-card" onclick="toggleFormulaExample(this)">
          <div class="label">Addition Rule</div>
          <div class="formula">P(AâˆªB) = P(A)+P(B)âˆ’P(Aâˆ©B)</div>
          <div class="desc">For any two events. If mutually exclusive (no overlap): just P(A) + P(B). "OR" = add, then subtract overlap.</div>
          <div class="formula-example">
            <div class="example-label">Example</div>
            <div class="example-problem"><strong>Problem:</strong> Roll a die. What's P(prime OR even)?</div>
            <div class="example-solution">
              <div class="formula-display">
                <div class="formula-general">P(AâˆªB) = P(A) + P(B) âˆ’ P(Aâˆ©B)</div>
                <div class="formula-arrow">â†“</div>
                <div class="formula-substituted">P(prime âˆª even) = P(prime) + P(even) âˆ’ P(prime âˆ© even)</div>
                <div class="formula-substituted">= 3/6 + 3/6 âˆ’ 1/6</div>
                <div class="formula-note">Primes: {2, 3, 5} | Even: {2, 4, 6} | Both: {2}</div>
              </div>
              <div class="formula-substitution">
                <strong>Calculate:</strong> = <strong>5/6</strong>
              </div>
            </div>
          </div>
        </div>
        <div class="formula-card red" onclick="toggleFormulaExample(this)">
          <div class="label">Expected Value</div>
          <div class="formula">E = Î£ xáµ¢ Â· P(xáµ¢)</div>
          <div class="desc">Weighted average of all outcomes. Multiply each outcome by its probability and sum them up. Common in games/dice problems.</div>
          <div class="formula-example">
            <div class="example-label">Example</div>
            <div class="example-problem"><strong>Problem:</strong> A game pays $10 for rolling 6, $5 for rolling 3â€“5, $0 otherwise. What's the expected value?</div>
            <div class="example-solution">
              <div class="formula-display">
                <div class="formula-general">E = Î£ xáµ¢ Â· P(xáµ¢)</div>
                <div class="formula-arrow">â†“</div>
                <div class="formula-substituted">E = $10Â·(1/6) + $5Â·(3/6) + $0Â·(2/6)</div>
                <div class="formula-note">Roll 6: $10, P=1/6 | Roll 3â€“5: $5, P=3/6 | Roll 1â€“2: $0, P=2/6</div>
              </div>
              <div class="formula-substitution">
                <strong>Calculate:</strong> = 10/6 + 15/6 + 0 = 25/6 = <strong>$4.17</strong>
              </div>
            </div>
          </div>
        </div>
        <div class="formula-card blue" onclick="toggleFormulaExample(this)">
          <div class="label">Geometric Probability</div>
          <div class="formula">P = favourable area / total area</div>
          <div class="desc">When the sample space is a region. Set up a ratio of areas, lengths, or volumes. Watch for symmetry!</div>
          <div class="formula-example">
            <div class="example-label">Example</div>
            <div class="example-problem"><strong>Problem:</strong> A point is chosen randomly in a 2Ã—2 square. What's P(it's within 1 unit of a corner)?</div>
            <div class="example-solution">
              <div class="formula-display">
                <div class="formula-general">P = favourable area / total area</div>
                <div class="formula-arrow">â†“</div>
                <div class="formula-substituted">P = Ï€ / 4</div>
                <div class="formula-note">Total: 2Ã—2 = 4 | Favourable: 4 quarter-circles (r=1) = Ï€</div>
              </div>
              <div class="formula-substitution">
                <strong>Calculate:</strong> â‰ˆ <strong>0.785</strong>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="section-block">
      <div class="section-label">How to Approach Problems</div>
      <div class="approach blue">
        <h3>Probability Problem Framework</h3>
        <div class="step">
          <div class="step-num">1</div>
          <div class="step-text"><strong>Identify the sample space:</strong> What are all possible outcomes? Are they equally likely? (Dice rolls: yes. Random points: use area.)</div>
        </div>
        <div class="step">
          <div class="step-num">2</div>
          <div class="step-text"><strong>Are events independent or dependent?</strong> Drawing without replacement = dependent. Flipping separate coins = independent. This determines if you multiply or use conditional probability.</div>
        </div>
        <div class="step">
          <div class="step-num">3</div>
          <div class="step-text"><strong>"At least one" â†’ use complement:</strong> P(at least one) = 1 âˆ’ P(none). Saves enormous casework.</div>
        </div>
        <div class="step">
          <div class="step-num">4</div>
          <div class="step-text"><strong>Multi-stage processes:</strong> Draw a tree or use multiplication for sequential events. Track how the denominator shrinks (without replacement).</div>
        </div>
        <div class="step">
          <div class="step-num">5</div>
          <div class="step-text"><strong>Simplify the fraction:</strong> MATHCOUNTS often wants a simplified fraction or a decimal. Always double-check your answer is â‰¤ 1!</div>
        </div>
      </div>
    </div>

    <div class="section-block">
      <div class="section-label">Gotchas â€” Click to Expand</div>
      <div class="gotcha-grid">
        <div class="gotcha-card" onclick="toggleGotcha(this)">
          <div class="gotcha-header">
            <span class="gotcha-icon">âš ï¸</span>
            <span class="gotcha-title">With vs. Without Replacement</span>
            <span class="gotcha-toggle">+</span>
          </div>
          <div class="gotcha-body"><strong>Without replacement:</strong> denominator shrinks each draw. If you draw 2 from 10, first draw is /10, second is /9. <strong>With replacement:</strong> denominator stays the same. The problem will usually specify â€” if it doesn't, assume WITHOUT replacement for physical objects like cards, marbles.</div>
        </div>
        <div class="gotcha-card" onclick="toggleGotcha(this)">
          <div class="gotcha-header">
            <span class="gotcha-icon">âš ï¸</span>
            <span class="gotcha-title">Equally Likely Outcomes</span>
            <span class="gotcha-toggle">+</span>
          </div>
          <div class="gotcha-body">You can only use "favorable/total" if ALL outcomes are equally likely. A loaded die, a spinner with unequal sectors, or two different coins â€” you can't just count outcomes, you must weight by probability.</div>
        </div>
        <div class="gotcha-card" onclick="toggleGotcha(this)">
          <div class="gotcha-header">
            <span class="gotcha-icon">âš ï¸</span>
            <span class="gotcha-title">Confusing AND / OR</span>
            <span class="gotcha-toggle">+</span>
          </div>
          <div class="gotcha-body">"A <strong>and</strong> B" = intersection = multiply probabilities. "A <strong>or</strong> B" = union = add then subtract overlap. Many students add when they should multiply and vice versa. Keyword scan: look for "and/both" vs. "or/either."</div>
        </div>
        <div class="gotcha-card" onclick="toggleGotcha(this)">
          <div class="gotcha-header">
            <span class="gotcha-icon">âš ï¸</span>
            <span class="gotcha-title">Order Matters in Probability</span>
            <span class="gotcha-toggle">+</span>
          </div>
          <div class="gotcha-body">When computing P(exactly 2 heads in 3 flips), don't forget to count HHT, HTH, THH as separate outcomes. If you use combinations in numerator, use combinations in denominator too â€” stay consistent. Mixing ordered/unordered breaks everything.</div>
        </div>
        <div class="gotcha-card" onclick="toggleGotcha(this)">
          <div class="gotcha-header">
            <span class="gotcha-icon">âš ï¸</span>
            <span class="gotcha-title">The "First Card" Trap</span>
            <span class="gotcha-toggle">+</span>
          </div>
          <div class="gotcha-body">When finding P(2 aces drawn from 52 cards), you can use C(4,2)/C(52,2) = 6/1326. Don't compute (4/52)Ã—(3/51) = 1/221 thinking these are different â€” they equal the same thing! Both methods work but you must be consistent.</div>
        </div>
        <div class="gotcha-card" onclick="toggleGotcha(this)">
          <div class="gotcha-header">
            <span class="gotcha-icon">âš ï¸</span>
            <span class="gotcha-title">Expected Value â‰  Most Likely</span>
            <span class="gotcha-toggle">+</span>
          </div>
          <div class="gotcha-body">Expected value is the <strong>long-run average</strong>, not the most common outcome. E(rolling a die) = 3.5, which you can never actually roll. Don't confuse EV with the mode or median of outcomes.</div>
        </div>
      </div>
    </div>

    <div class="section-block">
      <div class="section-label">Practice Problems</div>

      <div class="example-card" onclick="toggleExample(this)">
        <div class="example-question">
          <span class="ex-num">EX 01</span>
          <span class="ex-q">A bag has 5 red and 4 blue marbles. Two marbles are drawn without replacement. What is the probability both are red?</span>
          <span class="ex-arrow">â–¶</span>
        </div>
        <div class="example-solution">
          <div class="sol-label">Solution</div>
          <div class="sol-text">
            <strong>Method 1 (Sequential):</strong> P(red) Ã— P(red | first was red) = (5/9) Ã— (4/8) = 20/72 = 5/18<br><br>
            <strong>Method 2 (Combinations):</strong> C(5,2)/C(9,2) = 10/36 = 5/18 âœ“
            <span class="ans">5/18</span>
          </div>
        </div>
      </div>

      <div class="example-card" onclick="toggleExample(this)">
        <div class="example-question">
          <span class="ex-num">EX 02</span>
          <span class="ex-q">What is the probability of rolling at least one 6 when rolling two dice?</span>
          <span class="ex-arrow">â–¶</span>
        </div>
        <div class="example-solution">
          <div class="sol-label">Solution</div>
          <div class="sol-text">
            Use the complement: P(at least one 6) = 1 âˆ’ P(no 6s).<br><br>
            P(no 6 on one die) = 5/6. Two independent dice:<br>
            P(no 6s) = (5/6)Â² = 25/36<br><br>
            P(at least one 6) = 1 âˆ’ 25/36
            <span class="ans">11/36</span>
          </div>
        </div>
      </div>

      <div class="example-card" onclick="toggleExample(this)">
        <div class="example-question">
          <span class="ex-num">EX 03</span>
          <span class="ex-q">A game pays $5 if you flip 3 heads with 3 coins, $2 for exactly 2 heads, and nothing otherwise. What is the expected value?</span>
          <span class="ex-arrow">â–¶</span>
        </div>
        <div class="example-solution">
          <div class="sol-label">Solution</div>
          <div class="sol-text">
            P(3 heads) = (1/2)Â³ = 1/8. Payout: $5<br>
            P(2 heads) = C(3,2)Â·(1/8) = 3/8. Payout: $2<br>
            P(else) = 4/8. Payout: $0<br><br>
            E = 5Â·(1/8) + 2Â·(3/8) + 0Â·(4/8) = 5/8 + 6/8
            <span class="ans">$1.375 (= 11/8)</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       TAB 3 Â· COMPLEMENTARY COUNTING
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section class="panel" id="tab-comp">

    <div class="section-block">
      <div class="section-label">The Core Idea</div>
      <div class="formula-grid">
        <div class="formula-card teal" onclick="toggleFormulaExample(this)">
          <div class="label">Complementary Counting</div>
          <div class="formula">Desired = Total âˆ’ Unwanted</div>
          <div class="desc">Count everything, then subtract what you <em>don't</em> want. Use when the restriction is complex but the opposite is simple.</div>
          <div class="formula-example">
            <div class="example-label">Example</div>
            <div class="example-problem"><strong>Problem:</strong> How many 4-digit numbers have at least one 7?</div>
            <div class="example-solution">
              <div class="formula-display">
                <div class="formula-general">Desired = Total âˆ’ Unwanted</div>
                <div class="formula-arrow">â†“</div>
                <div class="formula-substituted">Numbers with at least one 7 = Total âˆ’ Numbers with NO 7</div>
                <div class="formula-substituted">= 9,000 âˆ’ 5,832</div>
                <div class="formula-note">Total: 9Ã—10Ã—10Ã—10 = 9,000 | Unwanted: 8Ã—9Ã—9Ã—9 = 5,832</div>
              </div>
              <div class="formula-substitution">
                <strong>Calculate:</strong> = <strong>3,168</strong>
              </div>
            </div>
          </div>
        </div>
        <div class="formula-card" onclick="toggleFormulaExample(this)">
          <div class="label">Inclusion-Exclusion (PIE)</div>
          <div class="formula">|AâˆªB| = |A|+|B|âˆ’|Aâˆ©B|</div>
          <div class="desc">For 3 sets: |AâˆªBâˆªC| = |A|+|B|+|C| âˆ’ |Aâˆ©B| âˆ’ |Aâˆ©C| âˆ’ |Bâˆ©C| + |Aâˆ©Bâˆ©C|</div>
          <div class="formula-example">
            <div class="example-label">Example</div>
            <div class="example-problem"><strong>Problem:</strong> How many integers 1â€“100 are divisible by 3 or 5?</div>
            <div class="example-solution">
              <div class="formula-display">
                <div class="formula-general">|AâˆªB| = |A| + |B| âˆ’ |Aâˆ©B|</div>
                <div class="formula-arrow">â†“</div>
                <div class="formula-substituted">|divisible by 3 or 5| = |divisible by 3| + |divisible by 5| âˆ’ |divisible by 15|</div>
                <div class="formula-substituted">= 33 + 20 âˆ’ 6</div>
                <div class="formula-note">|A| = âŒŠ100/3âŒ‹ = 33 | |B| = âŒŠ100/5âŒ‹ = 20 | |Aâˆ©B| = âŒŠ100/15âŒ‹ = 6</div>
              </div>
              <div class="formula-substitution">
                <strong>Calculate:</strong> = <strong>47</strong>
              </div>
            </div>
          </div>
        </div>
        <div class="formula-card blue" onclick="toggleFormulaExample(this)">
          <div class="label">Derangements (Complement)</div>
          <div class="formula">D(n) = n! âˆ’ (arrangements with â‰¥1 fixed)</div>
          <div class="desc">Use PIE to subtract arrangements where at least one item is in its original position. Shortcut: D(n) â‰ˆ round(n!/e)</div>
          <div class="formula-example">
            <div class="example-label">Example</div>
            <div class="example-problem"><strong>Problem:</strong> 5 people each get a wrong hat. How many ways?</div>
            <div class="example-solution">
              <div class="formula-display">
                <div class="formula-general">D(n) = n! âˆ’ (arrangements with â‰¥1 fixed)</div>
                <div class="formula-arrow">â†“</div>
                <div class="formula-substituted">D(5) = 5! âˆ’ C(5,1)Â·4! + C(5,2)Â·3! âˆ’ C(5,3)Â·2! + C(5,4)Â·1! âˆ’ C(5,5)Â·0!</div>
                <div class="formula-note">Using PIE: Total âˆ’ (at least 1 correct)</div>
              </div>
              <div class="formula-substitution">
                <strong>Calculate:</strong> = 120 âˆ’ 5Â·24 + 10Â·6 âˆ’ 10Â·2 + 5Â·1 âˆ’ 1Â·1<br>= 120 âˆ’ 120 + 60 âˆ’ 20 + 5 âˆ’ 1 = <strong>44 ways</strong>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="section-block">
      <div class="section-label">When to Use Complementary Counting</div>
      <div class="approach teal">
        <h3>Trigger Words &amp; Patterns</h3>
        <div class="step">
          <div class="step-num">1</div>
          <div class="step-text"><strong>"At least one":</strong> Almost always easier to do 1 âˆ’ P(none). Counting "at least one of X" via casework means summing exactly 1, exactly 2, etc. â€” much slower.</div>
        </div>
        <div class="step">
          <div class="step-num">2</div>
          <div class="step-text"><strong>"Not all the same" / "Not all different":</strong> The complement (all same, or all different) is usually much simpler to count directly.</div>
        </div>
        <div class="step">
          <div class="step-num">3</div>
          <div class="step-text"><strong>Many cases, simple opposite:</strong> If direct counting requires 5+ cases but the complement is 1 calculation, go complementary.</div>
        </div>
        <div class="step">
          <div class="step-num">4</div>
          <div class="step-text"><strong>PIE trigger â€” "divisible by A OR B":</strong> Count divisible by A, add divisible by B, subtract divisible by both (LCM). Classic number theory + counting hybrid.</div>
        </div>
        <div class="step">
          <div class="step-num">5</div>
          <div class="step-text"><strong>Restriction avoidance:</strong> "No two adjacent" or "none in a row" often yields 2â€“3 casework situations directly, but complement (some are adjacent) is fewer and cleaner.</div>
        </div>
      </div>
    </div>

    <div class="section-block">
      <div class="section-label">Gotchas â€” Click to Expand</div>
      <div class="gotcha-grid">
        <div class="gotcha-card" onclick="toggleGotcha(this)">
          <div class="gotcha-header">
            <span class="gotcha-icon">âš ï¸</span>
            <span class="gotcha-title">Forgetting to Account for All Cases</span>
            <span class="gotcha-toggle">+</span>
          </div>
          <div class="gotcha-body">When you subtract the unwanted, make sure your "unwanted" set is <strong>exactly</strong> what you don't want â€” not a subset. If you want "not all red" and you only subtract "all red," you're correct. But if the problem is more complex, a Venn diagram helps ensure you've covered every case.</div>
        </div>
        <div class="gotcha-card" onclick="toggleGotcha(this)">
          <div class="gotcha-header">
            <span class="gotcha-icon">âš ï¸</span>
            <span class="gotcha-title">Double-Counting in PIE</span>
            <span class="gotcha-toggle">+</span>
          </div>
          <div class="gotcha-body">In PIE, things in multiple sets get added multiple times. The alternating +/âˆ’ pattern fixes this. For 2 sets: add both, subtract overlap. For 3 sets: add all three, subtract pairwise overlaps, add back the triple overlap. Mess up the sign and you'll over- or undercount.</div>
        </div>
        <div class="gotcha-card" onclick="toggleGotcha(this)">
          <div class="gotcha-header">
            <span class="gotcha-icon">âš ï¸</span>
            <span class="gotcha-title">Total Must Match Your Space</span>
            <span class="gotcha-toggle">+</span>
          </div>
          <div class="gotcha-body">Your "Total" must use the <strong>same rules</strong> as your desired count. If you're counting ordered pairs, the total must be ordered pairs. If you're counting subsets, total must be subsets. Mixing ordered and unordered totals is a very sneaky mistake.</div>
        </div>
        <div class="gotcha-card" onclick="toggleGotcha(this)">
          <div class="gotcha-header">
            <span class="gotcha-icon">âš ï¸</span>
            <span class="gotcha-title">Complementary with Probability</span>
            <span class="gotcha-toggle">+</span>
          </div>
          <div class="gotcha-body">In probability, complementary is P(A) = 1 âˆ’ P(Aá¶œ). In counting, it's |A| = Total âˆ’ |Aá¶œ|. These are the same idea but apply differently. Make sure you know if you're computing a <strong>count</strong> or a <strong>probability</strong> â€” the setup differs.</div>
        </div>
        <div class="gotcha-card" onclick="toggleGotcha(this)">
          <div class="gotcha-header">
            <span class="gotcha-icon">âš ï¸</span>
            <span class="gotcha-title">PIE Denominator Stays Fixed</span>
            <span class="gotcha-toggle">+</span>
          </div>
          <div class="gotcha-body">When using PIE for probability, the denominator of all fractions should be the same total sample space. Don't reduce individual fractions before adding/subtracting â€” you'll lose the common denominator and create arithmetic errors.</div>
        </div>
      </div>
    </div>

    <div class="section-block">
      <div class="section-label">Practice Problems</div>

      <div class="example-card" onclick="toggleExample(this)">
        <div class="example-question">
          <span class="ex-num">EX 01</span>
          <span class="ex-q">How many integers from 1 to 100 are divisible by 3 OR by 5?</span>
          <span class="ex-arrow">â–¶</span>
        </div>
        <div class="example-solution">
          <div class="sol-label">Solution â€” PIE</div>
          <div class="sol-text">
            Divisible by 3: âŒŠ100/3âŒ‹ = <strong>33</strong><br>
            Divisible by 5: âŒŠ100/5âŒ‹ = <strong>20</strong><br>
            Divisible by both (15): âŒŠ100/15âŒ‹ = <strong>6</strong><br><br>
            PIE: 33 + 20 âˆ’ 6
            <span class="ans">47</span>
          </div>
        </div>
      </div>

      <div class="example-card" onclick="toggleExample(this)">
        <div class="example-question">
          <span class="ex-num">EX 02</span>
          <span class="ex-q">How many 4-letter strings (Aâ€“Z) have at least one repeated letter?</span>
          <span class="ex-arrow">â–¶</span>
        </div>
        <div class="example-solution">
          <div class="sol-label">Solution â€” Complementary</div>
          <div class="sol-text">
            <strong>Total</strong> 4-letter strings = 26â´ = 456,976<br><br>
            <strong>All distinct</strong> letters = 26 Ã— 25 Ã— 24 Ã— 23 = 358,800<br><br>
            At least one repeat = 456,976 âˆ’ 358,800
            <span class="ans">98,176</span>
          </div>
        </div>
      </div>

      <div class="example-card" onclick="toggleExample(this)">
        <div class="example-question">
          <span class="ex-num">EX 03</span>
          <span class="ex-q">In a class of 30 students, 18 play soccer, 15 play basketball, and 7 play both. How many play neither?</span>
          <span class="ex-arrow">â–¶</span>
        </div>
        <div class="example-solution">
          <div class="sol-label">Solution â€” PIE + Complement</div>
          <div class="sol-text">
            Students playing soccer OR basketball:<br>
            |S âˆª B| = 18 + 15 âˆ’ 7 = <strong>26</strong><br><br>
            Students playing neither = Total âˆ’ |S âˆª B|<br>
            = 30 âˆ’ 26
            <span class="ans">4 students</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       TAB 4 Â· NUMBER THEORY
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section class="panel" id="tab-number">

    <div class="section-block">
      <div class="section-label">Core Formulas</div>
      <div class="formula-grid">
        <div class="formula-card" onclick="toggleFormulaExample(this)">
          <div class="label">GCD (Greatest Common Divisor)</div>
          <div class="formula">gcd(a,b) = gcd(b, a mod b)</div>
          <div class="desc">Use Euclidean algorithm. For prime factorization: take minimum exponents. <em>gcd(12,18) = gcd(2Â²Â·3, 2Â·3Â²) = 2Â·3 = 6</em></div>
          <div class="formula-example">
            <div class="example-label">Example</div>
            <div class="example-problem"><strong>Problem:</strong> Find gcd(48, 180)</div>
            <div class="example-solution">
              <div class="formula-display">
                <div class="formula-general">gcd(a,b) = gcd(b, a mod b)</div>
                <div class="formula-arrow">â†“</div>
                <div class="formula-substituted">gcd(48, 180) = gcd(180, 48)</div>
                <div class="formula-substituted">= gcd(48, 180 mod 48) = gcd(48, 36)</div>
                <div class="formula-substituted">= gcd(36, 48 mod 36) = gcd(36, 12)</div>
                <div class="formula-substituted">= gcd(12, 36 mod 12) = gcd(12, 0) = 12</div>
              </div>
              <div class="formula-substitution">
                <strong>Or by prime factorization:</strong> 48 = 2â´Â·3, 180 = 2Â²Â·3Â²Â·5<br>Take minimum exponents: 2Â²Â·3Â¹ = <strong>12</strong>
              </div>
            </div>
          </div>
        </div>
        <div class="formula-card blue" onclick="toggleFormulaExample(this)">
          <div class="label">LCM (Least Common Multiple)</div>
          <div class="formula">lcm(a,b) = aÂ·b / gcd(a,b)</div>
          <div class="desc">For prime factorization: take maximum exponents. Always: gcd(a,b) Â· lcm(a,b) = aÂ·b</div>
          <div class="formula-example">
            <div class="example-label">Example</div>
            <div class="example-problem"><strong>Problem:</strong> Find lcm(12, 18)</div>
            <div class="example-solution">
              <div class="formula-display">
                <div class="formula-general">lcm(a,b) = aÂ·b / gcd(a,b)</div>
                <div class="formula-arrow">â†“</div>
                <div class="formula-substituted">lcm(12, 18) = 12Â·18 / gcd(12, 18)</div>
                <div class="formula-substituted">= 216 / 6</div>
              </div>
              <div class="formula-substitution">
                <strong>Calculate:</strong> = <strong>36</strong><br><br><strong>Or by prime factorization:</strong> 12 = 2Â²Â·3, 18 = 2Â·3Â²<br>Take maximum exponents: 2Â²Â·3Â² = <strong>36</strong>
              </div>
            </div>
          </div>
        </div>
        <div class="formula-card teal" onclick="toggleFormulaExample(this)">
          <div class="label">Number of Divisors</div>
          <div class="formula">d(n) = (eâ‚+1)(eâ‚‚+1)â€¦(eâ‚–+1)</div>
          <div class="desc">If n = pâ‚áµ‰Â¹Â·pâ‚‚áµ‰Â²Â·â€¦Â·pâ‚–áµ‰áµ, then d(n) counts all divisors. <em>d(12) = d(2Â²Â·3Â¹) = (2+1)(1+1) = 6</em></div>
          <div class="formula-example">
            <div class="example-label">Example</div>
            <div class="example-problem"><strong>Problem:</strong> How many positive divisors does 360 have?</div>
            <div class="example-solution">
              <div class="formula-display">
                <div class="formula-general">d(n) = (eâ‚+1)(eâ‚‚+1)â€¦(eâ‚–+1)</div>
                <div class="formula-arrow">â†“</div>
                <div class="formula-substituted">360 = 2Â³Â·3Â²Â·5Â¹</div>
                <div class="formula-substituted">d(360) = (3+1)(2+1)(1+1)</div>
              </div>
              <div class="formula-substitution">
                <strong>Calculate:</strong> = 4Â·3Â·2 = <strong>24 divisors</strong>
              </div>
            </div>
          </div>
        </div>
        <div class="formula-card red" onclick="toggleFormulaExample(this)">
          <div class="label">Sum of Divisors</div>
          <div class="formula">Ïƒ(n) = (pâ‚áµ‰Â¹âºÂ¹âˆ’1)/(pâ‚âˆ’1) Â· (pâ‚‚áµ‰Â²âºÂ¹âˆ’1)/(pâ‚‚âˆ’1) Â· â€¦</div>
          <div class="desc">Sum of all positive divisors. For prime p: Ïƒ(páµ‰) = (páµ‰âºÂ¹âˆ’1)/(pâˆ’1). <em>Ïƒ(12) = Ïƒ(2Â²Â·3Â¹) = (2Â³âˆ’1)/(2âˆ’1) Â· (3Â²âˆ’1)/(3âˆ’1) = 7Â·4 = 28</em></div>
          <div class="formula-example">
            <div class="example-label">Example</div>
            <div class="example-problem"><strong>Problem:</strong> Find the sum of all positive divisors of 18</div>
            <div class="example-solution">
              <div class="formula-display">
                <div class="formula-general">Ïƒ(n) = (pâ‚áµ‰Â¹âºÂ¹âˆ’1)/(pâ‚âˆ’1) Â· (pâ‚‚áµ‰Â²âºÂ¹âˆ’1)/(pâ‚‚âˆ’1)</div>
                <div class="formula-arrow">â†“</div>
                <div class="formula-substituted">18 = 2Â¹Â·3Â²</div>
                <div class="formula-substituted">Ïƒ(18) = (2Â²âˆ’1)/(2âˆ’1) Â· (3Â³âˆ’1)/(3âˆ’1)</div>
                <div class="formula-substituted">= 3/1 Â· 26/2 = 3 Â· 13</div>
              </div>
              <div class="formula-substitution">
                <strong>Calculate:</strong> = <strong>39</strong><br><br><strong>Verify:</strong> Divisors: 1, 2, 3, 6, 9, 18 â†’ Sum = 39 âœ“
              </div>
            </div>
          </div>
        </div>
        <div class="formula-card blue" onclick="toggleFormulaExample(this)">
          <div class="label">Modular Arithmetic</div>
          <div class="formula">(a+b) mod m = ((a mod m) + (b mod m)) mod m</div>
          <div class="desc">Same for subtraction and multiplication. Division requires modular inverse. <em>Useful for finding remainders of large numbers.</em></div>
          <div class="formula-example">
            <div class="example-label">Example</div>
            <div class="example-problem"><strong>Problem:</strong> What is 1234 + 5678 mod 7?</div>
            <div class="example-solution">
              <div class="formula-display">
                <div class="formula-general">(a+b) mod m = ((a mod m) + (b mod m)) mod m</div>
                <div class="formula-arrow">â†“</div>
                <div class="formula-substituted">(1234 + 5678) mod 7 = ((1234 mod 7) + (5678 mod 7)) mod 7</div>
                <div class="formula-substituted">= (2 + 1) mod 7</div>
              </div>
              <div class="formula-substitution">
                <strong>Calculate:</strong> 1234 Ã· 7 = 176 R2, 5678 Ã· 7 = 811 R1<br>(2 + 1) mod 7 = <strong>3</strong>
              </div>
            </div>
          </div>
        </div>
        <div class="formula-card" onclick="toggleFormulaExample(this)">
          <div class="label">Fermat's Little Theorem</div>
          <div class="formula">If p is prime, aáµ–â»Â¹ â‰¡ 1 (mod p)</div>
          <div class="desc">For gcd(a,p) = 1. Useful for finding large powers mod p. <em>2â¶ mod 7 = 2â·â»Â¹ mod 7 = 1 mod 7</em></div>
          <div class="formula-example">
            <div class="example-label">Example</div>
            <div class="example-problem"><strong>Problem:</strong> Find 3Â¹â°â° mod 7</div>
            <div class="example-solution">
              <div class="formula-display">
                <div class="formula-general">aáµ–â»Â¹ â‰¡ 1 (mod p) if p is prime</div>
                <div class="formula-arrow">â†“</div>
                <div class="formula-substituted">3â¶ â‰¡ 1 (mod 7) since 7 is prime</div>
                <div class="formula-substituted">3Â¹â°â° = 3â¶Â·Â¹â¶ + â´ = (3â¶)Â¹â¶ Â· 3â´</div>
                <div class="formula-substituted">â‰¡ 1Â¹â¶ Â· 3â´ (mod 7) = 3â´ (mod 7)</div>
              </div>
              <div class="formula-substitution">
                <strong>Calculate:</strong> 3â´ = 81 â‰¡ 4 (mod 7)<br>Answer: <strong>4</strong>
              </div>
            </div>
          </div>
        </div>
        <div class="formula-card teal" onclick="toggleFormulaExample(this)">
          <div class="label">Euler's Totient Function</div>
          <div class="formula">Ï†(n) = n Â· Î (1 âˆ’ 1/páµ¢)</div>
          <div class="desc">Counts integers â‰¤ n coprime to n. For prime p: Ï†(p) = pâˆ’1. For páµ‰: Ï†(páµ‰) = páµ‰ âˆ’ páµ‰â»Â¹</div>
          <div class="formula-example">
            <div class="example-label">Example</div>
            <div class="example-problem"><strong>Problem:</strong> Find Ï†(12)</div>
            <div class="example-solution">
              <div class="formula-display">
                <div class="formula-general">Ï†(n) = n Â· Î (1 âˆ’ 1/páµ¢)</div>
                <div class="formula-arrow">â†“</div>
                <div class="formula-substituted">12 = 2Â²Â·3Â¹</div>
                <div class="formula-substituted">Ï†(12) = 12 Â· (1âˆ’1/2) Â· (1âˆ’1/3)</div>
                <div class="formula-substituted">= 12 Â· 1/2 Â· 2/3</div>
              </div>
              <div class="formula-substitution">
                <strong>Calculate:</strong> = 12 Â· 1/3 = <strong>4</strong><br><br><strong>Verify:</strong> Coprime to 12: {1, 5, 7, 11} â†’ 4 numbers âœ“
              </div>
            </div>
          </div>
        </div>
        <div class="formula-card" onclick="toggleFormulaExample(this)">
          <div class="label">Chinese Remainder Theorem</div>
          <div class="formula">x â‰¡ a (mod m), x â‰¡ b (mod n)</div>
          <div class="desc">If gcd(m,n) = 1, solution exists mod (mÂ·n). Find xâ‚, xâ‚‚ such that mÂ·xâ‚ + nÂ·xâ‚‚ = 1, then x = aÂ·nÂ·xâ‚‚ + bÂ·mÂ·xâ‚</div>
          <div class="formula-example">
            <div class="example-label">Example</div>
            <div class="example-problem"><strong>Problem:</strong> Find x such that x â‰¡ 2 (mod 3) and x â‰¡ 3 (mod 5)</div>
            <div class="example-solution">
              <div class="formula-display">
                <div class="formula-general">x â‰¡ a (mod m), x â‰¡ b (mod n)</div>
                <div class="formula-arrow">â†“</div>
                <div class="formula-substituted">x â‰¡ 2 (mod 3), x â‰¡ 3 (mod 5)</div>
                <div class="formula-substituted">Try x = 3k + 2, need 3k + 2 â‰¡ 3 (mod 5)</div>
                <div class="formula-substituted">3k â‰¡ 1 (mod 5) â†’ k â‰¡ 2 (mod 5)</div>
                <div class="formula-substituted">k = 5m + 2, so x = 3(5m+2) + 2 = 15m + 8</div>
              </div>
              <div class="formula-substitution">
                <strong>Answer:</strong> x â‰¡ <strong>8 (mod 15)</strong><br>Verify: 8 mod 3 = 2 âœ“, 8 mod 5 = 3 âœ“
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="section-block">
      <div class="section-label">Divisibility Rules</div>
      <div class="remember-grid">
        <div class="remember-pill">
          <span class="pill-icon">2</span>
          <div class="pill-text">Divisible by <strong>2</strong>: Last digit is even (0, 2, 4, 6, 8)</div>
        </div>
        <div class="remember-pill">
          <span class="pill-icon">3</span>
          <div class="pill-text">Divisible by <strong>3</strong>: Sum of digits is divisible by 3</div>
        </div>
        <div class="remember-pill">
          <span class="pill-icon">4</span>
          <div class="pill-text">Divisible by <strong>4</strong>: Last 2 digits form a number divisible by 4</div>
        </div>
        <div class="remember-pill">
          <span class="pill-icon">5</span>
          <div class="pill-text">Divisible by <strong>5</strong>: Last digit is 0 or 5</div>
        </div>
        <div class="remember-pill">
          <span class="pill-icon">6</span>
          <div class="pill-text">Divisible by <strong>6</strong>: Divisible by both 2 and 3</div>
        </div>
        <div class="remember-pill">
          <span class="pill-icon">7</span>
          <div class="pill-text">Divisible by <strong>7</strong>: Double last digit, subtract from rest. Result divisible by 7?</div>
        </div>
        <div class="remember-pill">
          <span class="pill-icon">8</span>
          <div class="pill-text">Divisible by <strong>8</strong>: Last 3 digits form a number divisible by 8</div>
        </div>
        <div class="remember-pill">
          <span class="pill-icon">9</span>
          <div class="pill-text">Divisible by <strong>9</strong>: Sum of digits is divisible by 9</div>
        </div>
        <div class="remember-pill">
          <span class="pill-icon">11</span>
          <div class="pill-text">Divisible by <strong>11</strong>: Alternating sum of digits is divisible by 11</div>
        </div>
      </div>
    </div>

    <div class="section-block">
      <div class="section-label">Practice Problems</div>

      <div class="example-card" onclick="toggleExample(this)">
        <div class="example-question">
          <span class="ex-num">EX 01</span>
          <span class="ex-q">Find the smallest positive integer that leaves remainder 2 when divided by 3, remainder 3 when divided by 5, and remainder 4 when divided by 7.</span>
          <span class="ex-arrow">â–¶</span>
        </div>
        <div class="example-solution">
          <div class="sol-label">Solution â€” Chinese Remainder Theorem</div>
          <div class="sol-text">
            We need x such that:<br>
            x â‰¡ 2 (mod 3), x â‰¡ 3 (mod 5), x â‰¡ 4 (mod 7)<br><br>
            Start with x â‰¡ 2 (mod 3) â†’ x = 3k + 2<br>
            Substitute into second: 3k + 2 â‰¡ 3 (mod 5) â†’ 3k â‰¡ 1 (mod 5) â†’ k â‰¡ 2 (mod 5)<br>
            So k = 5m + 2, giving x = 3(5m + 2) + 2 = 15m + 8<br><br>
            Now x = 15m + 8 â‰¡ 4 (mod 7)<br>
            15m + 8 â‰¡ 4 (mod 7) â†’ m + 1 â‰¡ 4 (mod 7) â†’ m â‰¡ 3 (mod 7)<br>
            So m = 7n + 3, giving x = 15(7n + 3) + 8 = 105n + 53<br><br>
            Smallest positive: n = 0 â†’ x = 53
            <span class="ans">53</span>
          </div>
        </div>
      </div>

      <div class="example-card" onclick="toggleExample(this)">
        <div class="example-question">
          <span class="ex-num">EX 02</span>
          <span class="ex-q">How many positive divisors does 360 have, and what is their sum?</span>
          <span class="ex-arrow">â–¶</span>
        </div>
        <div class="example-solution">
          <div class="sol-label">Solution</div>
          <div class="sol-text">
            <strong>Prime factorization:</strong> 360 = 2Â³ Â· 3Â² Â· 5Â¹<br><br>
            <strong>Number of divisors:</strong> d(360) = (3+1)(2+1)(1+1) = 4Â·3Â·2 = <strong>24 divisors</strong><br><br>
            <strong>Sum of divisors:</strong> Ïƒ(360) = (2â´âˆ’1)/(2âˆ’1) Â· (3Â³âˆ’1)/(3âˆ’1) Â· (5Â²âˆ’1)/(5âˆ’1)<br>
            = 15/1 Â· 26/2 Â· 24/4 = 15 Â· 13 Â· 6 = <strong>1170</strong>
            <span class="ans">24 divisors, sum = 1170</span>
          </div>
        </div>
      </div>

      <div class="example-card" onclick="toggleExample(this)">
        <div class="example-question">
          <span class="ex-num">EX 03</span>
          <span class="ex-q">Find the last two digits of 7Â¹â°â°</span>
          <span class="ex-arrow">â–¶</span>
        </div>
        <div class="example-solution">
          <div class="sol-label">Solution â€” Modular Arithmetic</div>
          <div class="sol-text">
            We need 7Â¹â°â° mod 100. Use Euler's theorem: Ï†(100) = Ï†(2Â²Â·5Â²) = 100Â·(1âˆ’1/2)(1âˆ’1/5) = 100Â·1/2Â·4/5 = 40<br><br>
            Since gcd(7, 100) = 1, 7â´â° â‰¡ 1 (mod 100)<br>
            7Â¹â°â° = 7â´â°Â·Â² + Â²â° = (7â´â°)Â² Â· 7Â²â° â‰¡ 1Â² Â· 7Â²â° (mod 100)<br><br>
            Calculate 7Â²â° mod 100: 7Â² = 49, 7â´ = 49Â² = 2401 â‰¡ 1 (mod 100)<br>
            So 7Â²â° = (7â´)âµ â‰¡ 1âµ = 1 (mod 100)<br><br>
            Answer: <strong>01</strong>
            <span class="ans">01</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       TAB 5 Â· QUICK REFERENCE
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section class="panel" id="tab-ref">

    <div class="section-block">
      <div class="section-label">Problem Type Identifier</div>
      <div style="background: var(--surface); border: 1px solid var(--border); border-radius: 8px; overflow: hidden;">
        <table class="q-table">
          <thead>
            <tr>
              <th>Keyword / Setup</th>
              <th>Strategy</th>
              <th>Formula</th>
              <th>Watch For</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>"Arrange", "order", "rank", seats in a row</td>
              <td><span class="tag tag-gold">Permutation</span></td>
              <td class="mono">P(n,r) = n!/(nâˆ’r)!</td>
              <td>Identical items? Divide by duplicates.</td>
            </tr>
            <tr>
              <td>"Choose", "select", "committee", "group"</td>
              <td><span class="tag tag-blue">Combination</span></td>
              <td class="mono">C(n,r) = n!/(r!(nâˆ’r)!)</td>
              <td>If roles differ (pres/VP), it's a permutation.</td>
            </tr>
            <tr>
              <td>Round table, circular arrangement, necklace</td>
              <td><span class="tag tag-gold">Circular Perm</span></td>
              <td class="mono">(nâˆ’1)! or (nâˆ’1)!/2</td>
              <td>Necklace = divide by 2 for flips.</td>
            </tr>
            <tr>
              <td>Distribute identical items into bins</td>
              <td><span class="tag tag-teal">Stars &amp; Bars</span></td>
              <td class="mono">C(n+kâˆ’1, kâˆ’1)</td>
              <td>At least 1 each? Subtract 1 per bin first.</td>
            </tr>
            <tr>
              <td>"At least one", "not all", many complex cases</td>
              <td><span class="tag tag-teal">Complementary</span></td>
              <td class="mono">Total âˆ’ Unwanted</td>
              <td>Ensure total and unwanted use same counting method.</td>
            </tr>
            <tr>
              <td>"OR", divisible by X or Y, union of conditions</td>
              <td><span class="tag tag-blue">PIE</span></td>
              <td class="mono">|A|+|B|âˆ’|Aâˆ©B|</td>
              <td>3+ sets? Alternate + and âˆ’ by subset size.</td>
            </tr>
            <tr>
              <td>Sequential draws, flips, rolls (without replacement)</td>
              <td><span class="tag tag-gold">Dependent Prob</span></td>
              <td class="mono">P(A)Â·P(B|A)</td>
              <td>Denominator shrinks each step.</td>
            </tr>
            <tr>
              <td>Independent events (separate coins, dice)</td>
              <td><span class="tag tag-gold">Independent Prob</span></td>
              <td class="mono">P(A)Â·P(B)</td>
              <td>Confirm truly independent â€” no shared space.</td>
            </tr>
            <tr>
              <td>"Expected value", games, prizes, average outcome</td>
              <td><span class="tag tag-blue">Expected Value</span></td>
              <td class="mono">Î£ xáµ¢Â·P(xáµ¢)</td>
              <td>Sum of all probabilities must = 1.</td>
            </tr>
            <tr>
              <td>Point/region in shape, random on a line/circle</td>
              <td><span class="tag tag-teal">Geometric Prob</span></td>
              <td class="mono">Area / Total Area</td>
              <td>Set up coordinate system; look for symmetry.</td>
            </tr>
            <tr>
              <td>Letters with repeats (MISSISSIPPI, BANANAâ€¦)</td>
              <td><span class="tag tag-gold">Multinomial</span></td>
              <td class="mono">n! / (a!Â·b!Â·c!â€¦)</td>
              <td>Count each distinct letter's frequency.</td>
            </tr>
            <tr>
              <td>No item in original position (secret santa, hats)</td>
              <td><span class="tag tag-blue">Derangement</span></td>
              <td class="mono">D(n) â‰ˆ n!/e</td>
              <td>D(1)=0, D(2)=1, D(3)=2, D(4)=9, D(5)=44</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="section-block">
      <div class="section-label">Things to Always Remember</div>
      <div class="remember-grid">
        <div class="remember-pill">
          <span class="pill-icon">ğŸ”¢</span>
          <div class="pill-text"><strong>0! = 1</strong>, not 0. This trips people up on C(n,0) and edge cases.</div>
        </div>
        <div class="remember-pill">
          <span class="pill-icon">ğŸ²</span>
          <div class="pill-text">Probabilities must <strong>sum to 1</strong>. Always sanity-check your answer isn't > 1.</div>
        </div>
        <div class="remember-pill">
          <span class="pill-icon">ğŸ”„</span>
          <div class="pill-text">C(n,r) = <strong>C(n, nâˆ’r)</strong>. Choosing 7 from 10 = choosing the 3 to leave out.</div>
        </div>
        <div class="remember-pill">
          <span class="pill-icon">ğŸ“</span>
          <div class="pill-text">PIE: alternate <strong>+ for odd</strong> subsets, <strong>âˆ’ for even</strong> subsets. Don't flip the signs.</div>
        </div>
        <div class="remember-pill">
          <span class="pill-icon">ğŸ§²</span>
          <div class="pill-text">"Glue" technique: treat a group as <strong>one unit</strong>, then multiply by the unit's internal arrangements.</div>
        </div>
        <div class="remember-pill">
          <span class="pill-icon">ğŸ”</span>
          <div class="pill-text">Derangements: D(1)=0, D(2)=1, D(3)=2, D(4)=9, D(5)=44. <strong>Memorize D(2)â€“D(5).</strong></div>
        </div>
        <div class="remember-pill">
          <span class="pill-icon">â­•</span>
          <div class="pill-text">Circular: fix one person, arrange the <strong>remaining (nâˆ’1)</strong> relative to them.</div>
        </div>
        <div class="remember-pill">
          <span class="pill-icon">ğŸ“Š</span>
          <div class="pill-text">Stars &amp; Bars: works <strong>only for identical items</strong>. Distinct items in bins = kâ¿.</div>
        </div>
        <div class="remember-pill">
          <span class="pill-icon">ğŸ§©</span>
          <div class="pill-text">For casework, make sure your cases are <strong>mutually exclusive and exhaustive</strong> â€” no overlaps, no gaps.</div>
        </div>
        <div class="remember-pill">
          <span class="pill-icon">ğŸ¯</span>
          <div class="pill-text">Complement is your <strong>best friend</strong> at state level. If counting directly needs 3+ cases, try flipping it.</div>
        </div>
        <div class="remember-pill">
          <span class="pill-icon">ğŸ“Œ</span>
          <div class="pill-text">n items, <strong>k chosen</strong>: combinations don't care about order. If selecting for different roles â†’ permutation.</div>
        </div>
        <div class="remember-pill">
          <span class="pill-icon">âš¡</span>
          <div class="pill-text">Geometric probability: <strong>reduce to 1D or 2D</strong> areas/lengths. Use symmetry whenever possible to simplify.</div>
        </div>
      </div>
    </div>

  </section>

</main>
</div>

<script src="main.js"></script>
</body>
</html>
